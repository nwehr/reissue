(this.webpackJsonpreissue=this.webpackJsonpreissue||[]).push([[0],{80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(17),o=n.n(s),i=n(29),u=n(20),l=n(8),j=n.n(l),b=n(10),d=n(11),h=n(87),m=n(84),p=n(83),O=n(88),f=n(12),v=n(13),x=n(18),g=n.n(x),y=function(){function e(t,n){Object(f.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=n}return Object(v.a)(e,[{key:"getComments",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(this.baseUrl+"/issues/".concat(t,"/comments"),{headers:{Authorization:"Bearer "+this.authToken}});case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return{id:e.id,body:e.body,createdAt:e.created_at,updatedAt:e.updated_at,author:{id:e.user.id,userName:e.user.login}}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createComment",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post(this.baseUrl+"/issues/".concat(t,"/comments"),{body:n},{headers:{Authorization:"Bearer "+this.authToken}});case 2:return r=e.sent,a=r.data,e.abrupt("return",{id:a.id,body:a.body,createdAt:a.created_at,updatedAt:a.updated_at,author:{id:a.user.id,userName:a.user.login}});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),k=n(16),w=n(49);function P(e){return{type:r.SetSelectedProject,payload:e}}!function(e){e[e.SetSelectedProject=0]="SetSelectedProject"}(r||(r={}));var T={selectedProject:null},S=Object(w.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SetSelectedProject:return Object(k.a)(Object(k.a)({},e),{},{selectedProject:t.payload});default:return e}})),C=function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,[{key:"getComments",value:function(e){var t=S.getState().selectedProject;return t?"gitlab"===t.schema?new Promise((function(e,t){t("Comments not implemented for gitlab.")})):new y(t.baseUrl,t.authToken).getComments(e):new Promise((function(e,t){t("No project selected")}))}},{key:"createComment",value:function(e,t){var n=S.getState().selectedProject;return n?"gitlab"===n.schema?new Promise((function(e,t){t("Comments not implemented for gitlab.")})):new y(n.baseUrl,n.authToken).createComment(e,t):new Promise((function(e,t){t("No project selected")}))}}]),e}(),U=n(45),I=n.n(U),A=n(2),N=function(e){var t=I()(e.comment.createdAt).format("llll");return Object(A.jsx)(O.a,{style:{marginBottom:"1em"},children:Object(A.jsxs)(O.a.Body,{children:[Object(A.jsx)(O.a.Text,{children:e.comment.body}),Object(A.jsxs)(O.a.Text,{children:[t," ",Object(A.jsx)("b",{children:e.comment.author.userName})]})]})})},B=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1],m=Object(a.useState)(null),O=Object(d.a)(m,2),f=O[0],v=O[1];Object(a.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=c,t.next=4,e.controller.getComments(e.issueId);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),v(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();v(null),t()}),[e.controller,e.issueId]);var x=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.t0=c,t.t1=[],t.t2=Object(u.a)(r),t.next=6,e.controller.createComment(e.issueId,i);case 6:t.t3=t.sent,t.t4=[t.t3],t.t5=t.t1.concat.call(t.t1,t.t2,t.t4),(0,t.t0)(t.t5),l("");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return f?Object(A.jsx)("p",{children:f}):Object(A.jsxs)(A.Fragment,{children:[r.map((function(e){return Object(A.jsx)(N,{comment:e})})),Object(A.jsx)(h.a,{onSubmit:x,children:Object(A.jsxs)(h.a.Group,{children:[Object(A.jsx)(h.a.Control,{style:{margin:"0 0 1em 0"},as:"textarea",placeholder:"Write your comment here...",value:i,onChange:function(e){l(e.currentTarget.value)}}),Object(A.jsx)(p.a,{type:"submit",children:"Add Comment"})]})})]})},z=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1];return Object(A.jsxs)(O.a,{style:{marginBottom:"1em"},children:[Object(A.jsxs)(O.a.Body,{children:[Object(A.jsx)(O.a.Title,{children:e.issue.title}),e.issue.body?Object(A.jsx)(O.a.Text,{children:e.issue.body}):Object(A.jsx)(O.a.Text,{children:Object(A.jsx)("i",{style:{color:"gray"},children:"No description provided."})})]}),Object(A.jsx)(O.a.Footer,{children:r?Object(A.jsxs)("div",{children:[Object(A.jsx)(B,{issueId:e.issue.id,controller:new C}),Object(A.jsx)("span",{className:"a text-primary",onClick:function(){return c(!1)},children:"Hide comments"})]}):Object(A.jsx)("div",{children:Object(A.jsxs)("span",{className:"a text-primary",onClick:function(){return c(!0)},children:["Show comments (",e.issue.comments,")"]})})})]})},L=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(d.a)(s,2),l=o[0],O=o[1],f=Object(a.useState)(null),v=Object(d.a)(f,2),x=v[0],g=v[1],y=Object(i.b)((function(e){return e.selectedProject}));Object(a.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=c,t.next=4,e.controller.getIssues();case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),g(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();c([]),g(null),(null===y||void 0===y?void 0:y.name)&&t()}),[e.controller,null===y||void 0===y?void 0:y.name]);var k=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.t0=c,t.t1=[],t.t2=Object(u.a)(r),t.next=6,e.controller.createIssue(l);case 6:t.t3=t.sent,t.t4=[t.t3],t.t5=t.t1.concat.call(t.t1,t.t2,t.t4),(0,t.t0)(t.t5),O("");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return x?Object(A.jsx)("p",{className:"text-danger",children:x}):Object(A.jsxs)(A.Fragment,{children:[y?Object(A.jsx)(h.a,{style:{marginBottom:"1em"},onSubmit:k,children:Object(A.jsxs)(m.a,{children:[Object(A.jsx)(h.a.Control,{value:l,onChange:function(e){O(e.currentTarget.value)}}),Object(A.jsx)(m.a.Append,{children:Object(A.jsx)(p.a,{type:"submit",children:"Add Issue"})})]})}):null,r.map((function(e){return Object(A.jsx)(z,{issue:e},e.id)}))]})},F=n(86),G=n(85),_=n(46),J=n(36),E=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({name:"",baseUrl:"",authToken:"",schema:"github"}),o=Object(d.a)(s,2),i=o[0],u=o[1],l=function(){c(!1)};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(p.a,{onClick:function(){u({name:"",baseUrl:"",authToken:"",schema:"github"}),c(!0)},style:{position:"absolute",bottom:"1em",left:"1em",width:"calc(100% - 2em)"},children:"Add Project"}),Object(A.jsxs)(G.a,{show:r,onHide:l,children:[Object(A.jsx)(G.a.Header,{closeButton:!0,children:Object(A.jsx)(G.a.Title,{children:"Add Project"})}),Object(A.jsx)(G.a.Body,{children:Object(A.jsxs)(h.a,{children:[Object(A.jsxs)(h.a.Group,{controlId:"formName",children:[Object(A.jsx)(h.a.Label,{children:"Name"}),Object(A.jsx)(h.a.Control,{type:"text",onChange:function(e){u(Object(k.a)(Object(k.a)({},i),{},{name:e.currentTarget.value}))}})]}),Object(A.jsxs)(h.a.Group,{controlId:"formBaseUrl",children:[Object(A.jsx)(h.a.Label,{children:"Base URL"}),Object(A.jsx)(h.a.Control,{type:"text",onChange:function(e){u(Object(k.a)(Object(k.a)({},i),{},{baseUrl:e.currentTarget.value.trim()}))}}),Object(A.jsxs)(h.a.Text,{style:{color:"gray"},children:["e.g. ","https://api.github.com/repos/{owner}/{project}"]})]}),Object(A.jsxs)(h.a.Group,{controlId:"formAuthToken",children:[Object(A.jsx)(h.a.Label,{children:"Personal Access Token"}),Object(A.jsx)(h.a.Control,{type:"text",onChange:function(e){u(Object(k.a)(Object(k.a)({},i),{},{authToken:e.currentTarget.value.trim()}))}}),Object(A.jsxs)(h.a.Text,{style:{color:"gray"},children:["See ",Object(A.jsx)("a",{href:"https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token",target:"_blank",rel:"noreferrer",children:"docs"})," on creating a personal access token."]})]}),Object(A.jsxs)(h.a.Group,{controlId:"formAuthToken",children:[Object(A.jsx)(h.a.Label,{children:"Schema"}),Object(A.jsxs)(h.a.Control,{as:"select",onChange:function(e){u(Object(k.a)(Object(k.a)({},i),{},{schema:e.currentTarget.value.trim()}))},children:[Object(A.jsx)("option",{children:"github"}),Object(A.jsx)("option",{children:"gitlab"})]})]})]})}),Object(A.jsxs)(G.a.Footer,{children:[Object(A.jsx)(p.a,{variant:"secondary",onClick:l,children:"Close"}),Object(A.jsx)(p.a,{variant:"primary",onClick:function(){e.onSubmitNewProject(i),c(!1)},disabled:!(i.name&&i.baseUrl&&i.authToken),children:"Add Project"})]})]})]})},H=function(e){var t=e.controller,n=Object(a.useState)(t.getProjects()),r=Object(d.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(t.getSelectedProject()),i=Object(d.a)(o,2),l=i[0],j=i[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(F.a,{className:"flex-column",children:c.length?c.map((function(e){var n,r=!!l&&l.name===e.name;return Object(A.jsxs)(F.a.Link,{active:r,eventKey:e.name,onClick:(n=e.name,function(){j(t.selectProject(n))}),children:["gitlab"===e.schema?Object(A.jsx)(J.b,{}):Object(A.jsx)(J.a,{})," ",e.name]},e.name)})):Object(A.jsxs)("div",{style:{textAlign:"center",margin:"1em"},children:[Object(A.jsx)("span",{style:{color:"gray"},children:"Add your first project."}),Object(A.jsx)("div",{children:Object(A.jsx)(_.a,{size:"1.5em",color:"gray",style:{marginTop:"1.5em"}})})]})}),Object(A.jsx)(E,{onSubmitNewProject:function(e){var n=t.createProject(e.name,e.baseUrl,e.authToken,e.schema);s([].concat(Object(u.a)(c),[n]))}})]})},D=n(48),K=function(){function e(t){Object(f.a)(this,e),this.repo=void 0,this.repo=t}return Object(v.a)(e,[{key:"getProjects",value:function(){return this.repo.getProjects()}},{key:"createProject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"github";return this.repo.createProject(e,t,n,r)}},{key:"getSelectedProject",value:function(){return S.getState().selectedProject}},{key:"selectProject",value:function(e){var t,n=this.getProjects(),r=Object(D.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.name===e)return S.dispatch(P(a)),a}}catch(c){r.e(c)}finally{r.f()}return null}}]),e}(),M=function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,[{key:"getProjects",value:function(){var e=localStorage.getItem("projects");return e?JSON.parse(e):[]}},{key:"createProject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"github",a={name:e,baseUrl:t,authToken:n,schema:r};return localStorage.setItem("projects",JSON.stringify([].concat(Object(u.a)(this.getProjects()),[a]))),a}}]),e}(),R=function(e){return Object(A.jsx)("div",{className:"sidebar",children:Object(A.jsx)(H,{controller:new K(new M)})})},W=function(){function e(t,n){Object(f.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=n}return Object(v.a)(e,[{key:"getIssues",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(this.baseUrl+"/issues",{headers:{Authorization:"Bearer "+this.authToken}});case 3:return t=e.sent,e.abrupt("return",t.data.map((function(e){return{id:e.number,state:e.state,title:e.title,body:e.body,comments:e.comments}})));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not retrieve your issues.")})));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"createIssue",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post(this.baseUrl+"/issues",{title:t},{headers:{Authorization:"Bearer "+this.authToken}});case 3:return n=e.sent,r=n.data,a=r.number,c=r.state,s=r.body,o=r.comments,e.abrupt("return",{id:a,state:c,title:n.data.title,body:s,comments:o});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not create an issues.")})));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),q=function(){function e(t,n){Object(f.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=n}return Object(v.a)(e,[{key:"getIssues",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(this.baseUrl+"/issues",{headers:{Authorization:"Bearer "+this.authToken}});case 3:return t=e.sent,e.abrupt("return",t.data.map((function(e){return{id:e.id,state:e.state,title:e.title,body:e.body,comments:0}})));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not retrieve your issues.")})));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"createIssue",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post(this.baseUrl+"/issues",{title:t},{headers:{Authorization:"Bearer "+this.authToken}});case 3:return n=e.sent,r=n.data,a=r.id,c=r.state,s=r.body,e.abrupt("return",{id:a,state:c,title:n.data.title,body:s,comments:0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not create an issues.")})));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Q=function(){function e(){Object(f.a)(this,e),this.repo=void 0,this.repo=null}return Object(v.a)(e,[{key:"getIssues",value:function(){var e=S.getState().selectedProject;return e?"gitlab"===e.schema?new q(e.baseUrl,e.authToken).getIssues():new W(e.baseUrl,e.authToken).getIssues():new Promise((function(e,t){t("No project selected")}))}},{key:"createIssue",value:function(e){var t=S.getState().selectedProject;return t?"gitlab"===t.schema?new q(t.baseUrl,t.authToken).createIssue(e):new W(t.baseUrl,t.authToken).createIssue(e):new Promise((function(e,t){t("No project selected")}))}}]),e}(),V=function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)(R,{}),Object(A.jsx)("div",{style:{marginLeft:"16em"},children:Object(A.jsx)(L,{controller:new Q})})]})};n(79),n(80);o.a.render(Object(A.jsx)(i.a,{store:S,children:Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(V,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.b86488f0.chunk.js.map