(this.webpackJsonpreissue=this.webpackJsonpreissue||[]).push([[0],{81:function(e,t,r){},82:function(e,t,r){"use strict";r.r(t);var n,c=r(1),a=r.n(c),s=r(17),o=r.n(s),i=r(22),u=r(20),l=r(10),j=r(87),b=r(47),d=r(32),h=r(45),m=r(2),O=function(e){switch(e.schema){case"gitlab":return Object(m.jsx)(d.c,{});case"github":return Object(m.jsx)(d.b,{});case"gitea":return Object(m.jsx)(h.a,{});default:return Object(m.jsx)(d.a,{})}},p=r(16),f=r(84),x=r(86),v=r(88),g=function(e){var t=Object(c.useState)(!1),r=Object(l.a)(t,2),n=r[0],a=r[1],s=Object(c.useState)({name:"",baseUrl:"",authToken:"",schema:"github"}),o=Object(l.a)(s,2),i=o[0],u=o[1],j=function(){a(!1)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a,{onClick:function(){u({name:"",baseUrl:"",authToken:"",schema:"github"}),a(!0)},style:{position:"absolute",bottom:"1em",left:"1em",width:"calc(100% - 2em)"},children:"Add Project"}),Object(m.jsxs)(x.a,{show:n,onHide:j,children:[Object(m.jsx)(x.a.Header,{closeButton:!0,children:Object(m.jsx)(x.a.Title,{children:"Add Project"})}),Object(m.jsx)(x.a.Body,{children:Object(m.jsxs)(v.a,{children:[Object(m.jsxs)(v.a.Group,{controlId:"formName",children:[Object(m.jsx)(v.a.Label,{children:"Name"}),Object(m.jsx)(v.a.Control,{type:"text",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{name:e.currentTarget.value}))}})]}),Object(m.jsxs)(v.a.Group,{controlId:"formBaseUrl",children:[Object(m.jsx)(v.a.Label,{children:"Base URL"}),Object(m.jsx)(v.a.Control,{type:"text",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{baseUrl:e.currentTarget.value.trim()}))}}),Object(m.jsxs)(v.a.Text,{style:{color:"gray"},children:["e.g. ","https://api.github.com/repos/{owner}/{project}"]})]}),Object(m.jsxs)(v.a.Group,{controlId:"formAuthToken",children:[Object(m.jsx)(v.a.Label,{children:"Personal Access Token"}),Object(m.jsx)(v.a.Control,{type:"password",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{authToken:e.currentTarget.value.trim()}))}}),Object(m.jsxs)(v.a.Text,{style:{color:"gray"},children:["See ",Object(m.jsx)("a",{href:"https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token",target:"_blank",rel:"noreferrer",children:"docs"})," on creating a personal access token."]})]}),Object(m.jsxs)(v.a.Group,{controlId:"formAuthToken",children:[Object(m.jsx)(v.a.Label,{children:"Schema"}),Object(m.jsxs)(v.a.Control,{as:"select",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{schema:e.currentTarget.value.trim()}))},children:[Object(m.jsx)("option",{children:"github"}),Object(m.jsx)("option",{children:"gitlab"}),Object(m.jsx)("option",{children:"gitea"})]})]})]})}),Object(m.jsxs)(x.a.Footer,{children:[Object(m.jsx)(f.a,{variant:"secondary",onClick:j,children:"Close"}),Object(m.jsx)(f.a,{variant:"primary",onClick:function(){e.onSubmitNewProject(i),a(!1)},disabled:!(i.name&&i.baseUrl&&i.authToken),children:"Add Project"})]})]})]})},y=function(e){var t=e.controller,r=Object(c.useState)(t.getProjects()),n=Object(l.a)(r,2),a=n[0],s=n[1],o=Object(c.useState)(t.getSelectedProject()),i=Object(l.a)(o,2),d=i[0],h=i[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j.a,{className:"flex-column",children:a.length?a.map((function(e){var r,n=!!d&&d.name===e.name;return Object(m.jsxs)(j.a.Link,{active:n,onClick:(r=e.name,function(){h(t.selectProject(r))}),children:[Object(m.jsx)(O,{schema:e.schema})," ",e.name]},e.name)})):Object(m.jsxs)("div",{style:{textAlign:"center",margin:"1em"},children:[Object(m.jsx)("span",{style:{color:"gray"},children:"Add your first project."}),Object(m.jsx)("div",{children:Object(m.jsx)(b.a,{size:"1.5em",color:"gray",style:{marginTop:"1.5em"}})})]})}),Object(m.jsx)(g,{onSubmitNewProject:function(e){s([].concat(Object(u.a)(a),[t.createProject(e)]))}})]})},k=r(48),w=r(12),P=r(13),T=r(50);function S(e){return{type:n.SetSelectedProject,payload:e}}!function(e){e[e.SetSelectedProject=0]="SetSelectedProject"}(n||(n={}));var C={selectedProject:null},I=Object(T.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SetSelectedProject:return Object(p.a)(Object(p.a)({},e),{},{selectedProject:t.payload});default:return e}})),U=function(){function e(t){Object(w.a)(this,e),this.repo=void 0,this.repo=t}return Object(P.a)(e,[{key:"getProjects",value:function(){return this.repo.getProjects()}},{key:"createProject",value:function(e){return this.repo.createProject(e)}},{key:"getSelectedProject",value:function(){return I.getState().selectedProject}},{key:"selectProject",value:function(e){var t,r=this.getProjects(),n=Object(k.a)(r);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(c.name===e)return I.dispatch(S(c)),c}}catch(a){n.e(a)}finally{n.f()}return null}}]),e}(),A=function(){function e(){Object(w.a)(this,e)}return Object(P.a)(e,[{key:"getProjects",value:function(){var e=localStorage.getItem("projects");return e?JSON.parse(e):[]}},{key:"createProject",value:function(e){return localStorage.setItem("projects",JSON.stringify([].concat(Object(u.a)(this.getProjects()),[e]))),e}}]),e}(),N=function(e){return Object(m.jsx)("div",{className:"sidebar",children:Object(m.jsx)(y,{controller:new U(new A)})})},B=r(8),G=r.n(B),z=r(11),F=r(18),L=r.n(F),_=function(){function e(t,r){Object(w.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=r}return Object(P.a)(e,[{key:"getIssues",value:function(){var e=Object(z.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get(this.baseUrl+"/issues",{headers:{Authorization:"Bearer "+this.authToken}});case 3:return t=e.sent,e.abrupt("return",t.data.map((function(e){return{id:e.number,state:e.state,title:e.title,body:e.body,comments:e.comments}})));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not retrieve your issues.")})));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"createIssue",value:function(){var e=Object(z.a)(G.a.mark((function e(t){var r,n,c,a,s,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post(this.baseUrl+"/issues",{title:t},{headers:{Authorization:"Bearer "+this.authToken}});case 3:return r=e.sent,n=r.data,c=n.number,a=n.state,s=n.body,o=n.comments,e.abrupt("return",{id:c,state:a,title:r.data.title,body:s,comments:o});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not create an issues.")})));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),J=function(){function e(t,r){Object(w.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=r}return Object(P.a)(e,[{key:"getIssues",value:function(){var e=Object(z.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get(this.baseUrl+"/issues",{headers:{Authorization:"Bearer "+this.authToken}});case 3:return t=e.sent,e.abrupt("return",t.data.map((function(e){return{id:e.id,state:e.state,title:e.title,body:e.body,comments:0}})));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not retrieve your issues.")})));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"createIssue",value:function(){var e=Object(z.a)(G.a.mark((function e(t){var r,n,c,a,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post(this.baseUrl+"/issues",{title:t},{headers:{Authorization:"Bearer "+this.authToken}});case 3:return r=e.sent,n=r.data,c=n.id,a=n.state,s=n.body,e.abrupt("return",{id:c,state:a,title:r.data.title,body:s,comments:0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e,t){t("Oops! Could not create an issues.")})));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=function(){function e(){Object(w.a)(this,e),this.repo=void 0,this.repo=null}return Object(P.a)(e,[{key:"getIssues",value:function(){var e=I.getState().selectedProject;return e?"gitlab"===e.schema?new J(e.baseUrl,e.authToken).getIssues():new _(e.baseUrl,e.authToken).getIssues():new Promise((function(e,t){t("No project selected")}))}},{key:"createIssue",value:function(e){var t=I.getState().selectedProject;return t?"gitlab"===t.schema?new J(t.baseUrl,t.authToken).createIssue(e):new _(t.baseUrl,t.authToken).createIssue(e):new Promise((function(e,t){t("No project selected")}))}}]),e}(),H=r(85),R=r(89),D=function(){function e(t,r){Object(w.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=r}return Object(P.a)(e,[{key:"getComments",value:function(){var e=Object(z.a)(G.a.mark((function e(t){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get(this.baseUrl+"/issues/".concat(t,"/comments"),{headers:{Authorization:"Bearer "+this.authToken}});case 2:return r=e.sent,e.abrupt("return",r.data.map((function(e){return{id:e.id,body:e.body,createdAt:e.created_at,updatedAt:e.updated_at,author:{id:e.user.id,userName:e.user.login}}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createComment",value:function(){var e=Object(z.a)(G.a.mark((function e(t,r){var n,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post(this.baseUrl+"/issues/".concat(t,"/comments"),{body:r},{headers:{Authorization:"Bearer "+this.authToken}});case 2:return n=e.sent,c=n.data,e.abrupt("return",{id:c.id,body:c.body,createdAt:c.created_at,updatedAt:c.updated_at,author:{id:c.user.id,userName:c.user.login}});case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),M=function(){function e(){Object(w.a)(this,e)}return Object(P.a)(e,[{key:"getComments",value:function(e){var t=I.getState().selectedProject;return t?"gitlab"===t.schema?new Promise((function(e,t){t("Comments not implemented for gitlab.")})):new D(t.baseUrl,t.authToken).getComments(e):new Promise((function(e,t){t("No project selected")}))}},{key:"createComment",value:function(e,t){var r=I.getState().selectedProject;return r?"gitlab"===r.schema?new Promise((function(e,t){t("Comments not implemented for gitlab.")})):new D(r.baseUrl,r.authToken).createComment(e,t):new Promise((function(e,t){t("No project selected")}))}}]),e}(),W=r(49),q=r.n(W),K=function(e){var t=q()(e.comment.createdAt).format("llll");return Object(m.jsx)(R.a,{style:{marginBottom:"1em"},children:Object(m.jsxs)(R.a.Body,{children:[Object(m.jsx)(R.a.Text,{children:e.comment.body}),Object(m.jsxs)(R.a.Text,{style:{color:"gray"},children:[Object(m.jsx)("b",{children:e.comment.author.userName})," commented on ",t]})]})})},Q=function(e){var t=Object(c.useState)([]),r=Object(l.a)(t,2),n=r[0],a=r[1],s=Object(c.useState)(""),o=Object(l.a)(s,2),i=o[0],j=o[1],b=Object(c.useState)(null),d=Object(l.a)(b,2),h=d[0],O=d[1];Object(c.useEffect)((function(){var t=function(){var t=Object(z.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=a,t.next=4,e.controller.getComments(e.issueId);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),O(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return O(null),t(),function(){a([]),O(null)}}),[e.controller,e.issueId]);var p=function(){var t=Object(z.a)(G.a.mark((function t(r){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.t0=a,t.t1=[],t.t2=Object(u.a)(n),t.next=6,e.controller.createComment(e.issueId,i);case 6:t.t3=t.sent,t.t4=[t.t3],t.t5=t.t1.concat.call(t.t1,t.t2,t.t4),(0,t.t0)(t.t5),j("");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return h?Object(m.jsx)("p",{children:h}):Object(m.jsxs)(m.Fragment,{children:[n.map((function(e){return Object(m.jsx)(K,{comment:e},e.id)})),Object(m.jsx)(v.a,{onSubmit:p,children:Object(m.jsxs)(v.a.Group,{children:[Object(m.jsx)(v.a.Control,{style:{margin:"0 0 1em 0"},as:"textarea",placeholder:"Leave a comment.",value:i,onChange:function(e){j(e.currentTarget.value)}}),Object(m.jsx)(f.a,{type:"submit",size:"sm",children:"Comment"})]})})]})},V=function(e){var t=e.issue,r=Object(c.useState)(!1),n=Object(l.a)(r,2),a=n[0],s=n[1];return Object(m.jsxs)(R.a,{style:{marginBottom:"1em"},children:[Object(m.jsxs)(R.a.Body,{children:[Object(m.jsx)(R.a.Text,{children:t.title}),t.body?Object(m.jsx)(R.a.Text,{children:t.body}):Object(m.jsx)(R.a.Text,{children:Object(m.jsx)("i",{style:{color:"gray"},children:"No description provided."})})]}),Object(m.jsx)(R.a.Footer,{children:a?Object(m.jsxs)("div",{children:[Object(m.jsx)(Q,{issueId:t.id,controller:new M}),Object(m.jsx)("span",{className:"a text-primary",onClick:function(){return s(!1)},children:"Hide comments"})]}):Object(m.jsx)("div",{children:Object(m.jsxs)("span",{className:"a text-primary",onClick:function(){return s(!0)},children:["Comments (",t.comments,")"]})})})]})},X=function(e){var t=Object(c.useState)([]),r=Object(l.a)(t,2),n=r[0],a=r[1],s=Object(c.useState)(""),o=Object(l.a)(s,2),j=o[0],b=o[1],d=Object(c.useState)(null),h=Object(l.a)(d,2),O=h[0],p=h[1],x=Object(i.b)((function(e){return e.selectedProject}));Object(c.useEffect)((function(){var t=function(){var t=Object(z.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=a,t.next=4,e.controller.getIssues();case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),p(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();a([]),p(null),(null===x||void 0===x?void 0:x.name)&&t()}),[e.controller,null===x||void 0===x?void 0:x.name]);var g=function(){var t=Object(z.a)(G.a.mark((function t(r){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.t0=a,t.t1=[],t.t2=Object(u.a)(n),t.next=6,e.controller.createIssue(j);case 6:t.t3=t.sent,t.t4=[t.t3],t.t5=t.t1.concat.call(t.t1,t.t2,t.t4),(0,t.t0)(t.t5),b("");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return O?Object(m.jsx)("p",{className:"text-danger",children:O}):Object(m.jsxs)(m.Fragment,{children:[x?Object(m.jsx)(v.a,{style:{marginBottom:"1em"},onSubmit:g,children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(v.a.Control,{value:j,onChange:function(e){b(e.currentTarget.value)}}),Object(m.jsx)(H.a.Append,{children:Object(m.jsx)(f.a,{type:"submit",children:"Add Issue"})})]})}):null,n.map((function(e){return Object(m.jsx)(V,{issue:e},e.id)}))]})},Y=function(e){var t=Object(i.b)((function(e){return e.selectedProject}));return t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h4",{children:[Object(m.jsx)(O,{schema:t.schema})," ",t.name]}),Object(m.jsx)("p",{children:t.baseUrl}),Object(m.jsx)(X,{controller:new E})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h4",{children:["Welcome to ",Object(m.jsx)("b",{children:"ReIssue!"})]}),Object(m.jsxs)("p",{children:["ReIssue consolodates issue tracking from multiple repositories. So far its supports ",Object(m.jsx)("a",{href:"https://github.com",children:"Github"}),", ",Object(m.jsx)("a",{href:"https://gitlab.com",children:"Gitlab"})," and ",Object(m.jsx)("a",{href:"https://gitea.com",children:"Gitea"}),"."]}),Object(m.jsx)("p",{children:"Get started by adding your first project!"})]})},Z=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(N,{}),Object(m.jsx)("div",{style:{marginLeft:"16em"},children:Object(m.jsx)(Y,{})})]})};r(80),r(81);o.a.render(Object(m.jsx)(i.a,{store:I,children:Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Z,{})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.1bbcb67f.chunk.js.map