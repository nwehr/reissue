(this.webpackJsonpreissue=this.webpackJsonpreissue||[]).push([[0],{77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),o=n(13),s=n.n(o),i=n(26),u=n(12),j=n.n(u),l=n(17),b=n(15),d=n(84),h=n(8),O=n(9),f=n(24),m=n.n(f),x=function(){function e(t,n){Object(h.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=n}return Object(O.a)(e,[{key:"getComments",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(this.baseUrl+"/issues/".concat(t,"/comments"),{headers:{Authorization:"Bearer "+this.authToken}});case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return{id:e.id,body:e.body,createdAt:e.created_at,updatedAt:e.updated_at,author:{id:e.user.id,userName:e.user.login}}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),p=n(14),v=n(46);function g(e){return{type:r.SetSelectedProject,payload:e}}!function(e){e[e.SetSelectedProject=0]="SetSelectedProject"}(r||(r={}));var y={selectedProject:null},k=Object(v.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SetSelectedProject:return Object(p.a)(Object(p.a)({},e),{},{selectedProject:t.payload});default:return e}})),P=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,[{key:"getComments",value:function(e){var t=k.getState().selectedProject;return t?new x(t.baseUrl,t.authToken).getComments(e):new Promise((function(e,t){t("No project selected")}))}}]),e}(),S=n(43),T=n.n(S),w=n(2),C=function(e){var t=T()(e.comment.createdAt).format("llll");return Object(w.jsx)(d.a,{children:Object(w.jsxs)(d.a.Body,{children:[Object(w.jsx)(d.a.Text,{children:e.comment.body}),Object(w.jsxs)(d.a.Text,{children:[t," ",Object(w.jsx)("b",{children:e.comment.author.userName})]})]})})},U=function(e){var t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){(function(){var t=Object(l.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.controller.getComments(e.issueId);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()})),Object(w.jsx)(w.Fragment,{children:r.map((function(e){return Object(w.jsx)(C,{comment:e})}))})},I=function(e){return Object(w.jsxs)(d.a,{style:{marginBottom:"1em"},children:[Object(w.jsxs)(d.a.Body,{children:[Object(w.jsx)(d.a.Title,{children:e.title}),e.body?Object(w.jsx)(d.a.Text,{children:e.body}):Object(w.jsx)(d.a.Text,{children:Object(w.jsx)("i",{style:{color:"gray"},children:"No description provided."})})]}),Object(w.jsx)(d.a.Footer,{children:Object(w.jsx)(U,{issueId:e.id,controller:new P})})]})},N=function(e){var t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],a=n[1],o=Object(i.b)((function(e){return e.selectedProject}));return Object(c.useEffect)((function(){var t=function(){var t=Object(l.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.controller.getIssues();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();a([]),t()}),[null===o||void 0===o?void 0:o.name]),Object(w.jsx)(w.Fragment,{children:r.map((function(e){return Object(w.jsx)(I,{id:e.id,title:e.title,body:e.body})}))})},A=n(27),B=n(82),L=n(80),F=n(81),G=n(83),J=function(e){var t=Object(c.useState)(!1),n=Object(b.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)({name:"",baseUrl:"",authToken:"",schema:"github"}),s=Object(b.a)(o,2),i=s[0],u=s[1],j=function(){a(!1)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L.a,{onClick:function(){u({name:"",baseUrl:"",authToken:"",schema:"github"}),a(!0)},style:{position:"absolute",bottom:"1em",left:"1em",width:"calc(100% - 2em)"},children:"Add Project"}),Object(w.jsxs)(F.a,{show:r,onHide:j,children:[Object(w.jsx)(F.a.Header,{closeButton:!0,children:Object(w.jsx)(F.a.Title,{children:"Add Project"})}),Object(w.jsx)(F.a.Body,{children:Object(w.jsxs)(G.a,{children:[Object(w.jsxs)(G.a.Group,{controlId:"formName",children:[Object(w.jsx)(G.a.Label,{children:"Name"}),Object(w.jsx)(G.a.Control,{type:"text",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{name:e.currentTarget.value}))}})]}),Object(w.jsxs)(G.a.Group,{controlId:"formBaseUrl",children:[Object(w.jsx)(G.a.Label,{children:"Base URL"}),Object(w.jsx)(G.a.Control,{type:"text",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{baseUrl:e.currentTarget.value}))}}),Object(w.jsx)(G.a.Text,{children:"https://api.github.com/repos/{owner}/{project}"})]}),Object(w.jsxs)(G.a.Group,{controlId:"formAuthToken",children:[Object(w.jsx)(G.a.Label,{children:"Personal Auth Token"}),Object(w.jsx)(G.a.Control,{type:"text",onChange:function(e){u(Object(p.a)(Object(p.a)({},i),{},{authToken:e.currentTarget.value}))}})]}),Object(w.jsxs)(G.a.Group,{controlId:"formAuthToken",children:[Object(w.jsx)(G.a.Label,{children:"Schema"}),Object(w.jsxs)(G.a.Control,{as:"select",disabled:!0,children:[Object(w.jsx)("option",{children:"github"}),Object(w.jsx)("option",{children:"gitlab"})]})]})]})}),Object(w.jsxs)(F.a.Footer,{children:[Object(w.jsx)(L.a,{variant:"secondary",onClick:j,children:"Close"}),Object(w.jsx)(L.a,{variant:"primary",onClick:function(){e.onSubmitNewProject(i),a(!1)},children:"Add Project"})]})]})]})},E=function(e){var t=e.controller,n=Object(c.useState)(t.getProjects()),r=Object(b.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(t.getSelectedProject()),i=Object(b.a)(s,2),u=i[0],j=i[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(B.a,{className:"flex-column",children:a.map((function(e){return Object(w.jsx)(B.a.Link,{active:!!u&&u.name==e.name,eventKey:e.name,onClick:(n=e.name,function(){j(t.selectProject(n))}),children:e.name});var n}))}),Object(w.jsx)(J,{onSubmitNewProject:function(e){var n=t.createProject(e.name,e.baseUrl,e.authToken,e.schema);o([].concat(Object(A.a)(a),[n]))}})]})},z=n(45),H=function(){function e(t){Object(h.a)(this,e),this.repo=void 0,this.repo=t}return Object(O.a)(e,[{key:"getProjects",value:function(){return this.repo.getProjects()}},{key:"createProject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"github";return this.repo.createProject(e,t,n,r)}},{key:"getSelectedProject",value:function(){return k.getState().selectedProject}},{key:"selectProject",value:function(e){var t,n=this.getProjects(),r=Object(z.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;if(c.name==e)return k.dispatch(g(c)),c}}catch(a){r.e(a)}finally{r.f()}return null}}]),e}(),_=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,[{key:"getProjects",value:function(){var e=localStorage.getItem("projects");return e?JSON.parse(e):[]}},{key:"createProject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"github",c={name:e,baseUrl:t,authToken:n,schema:r};return localStorage.setItem("projects",JSON.stringify([].concat(Object(A.a)(this.getProjects()),[c]))),c}}]),e}(),K=function(e){return Object(w.jsx)("div",{className:"sidebar",children:Object(w.jsx)(E,{controller:new H(new _)})})},M=function(){function e(t,n){Object(h.a)(this,e),this.baseUrl=void 0,this.authToken=void 0,this.baseUrl=t,this.authToken=n}return Object(O.a)(e,[{key:"getIssues",value:function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(this.baseUrl+"/issues",{headers:{Authorization:"Bearer "+this.authToken}});case 2:return t=e.sent,e.abrupt("return",t.data.map((function(e){return{id:e.number,state:e.state,title:e.title,body:e.body}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),R=function(){function e(){Object(h.a)(this,e),this.repo=void 0,this.repo=null}return Object(O.a)(e,[{key:"getIssues",value:function(){var e=k.getState().selectedProject;return e?new M(e.baseUrl,e.authToken).getIssues():new Promise((function(e,t){t("No project selected")}))}}]),e}(),q=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(K,{}),Object(w.jsx)("div",{style:{marginLeft:"16em"},children:Object(w.jsx)(N,{controller:new R})})]})};n(76),n(77);s.a.render(Object(w.jsx)(i.a,{store:k,children:Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(q,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.6a23ae41.chunk.js.map